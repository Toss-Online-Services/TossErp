# Pinia State Management Guidelines

## Store Structure
- Use feature-based store organization
- Keep stores focused and single-purpose
- Use proper TypeScript interfaces
- Implement proper store composition
- Use proper naming conventions

## Store Definition
- Use `defineStore` with proper options
- Implement proper state typing
- Use getters for computed state
- Implement proper actions for mutations
- Use proper store composition

## State Design
- Keep state normalized and flat
- Use proper data structures
- Implement proper state validation
- Use proper default values
- Avoid deeply nested state

## Getters
- Use getters for computed state
- Implement proper caching strategies
- Use proper parameter passing
- Keep getters pure and synchronous
- Use proper TypeScript typing

## Actions
- Use actions for async operations
- Implement proper error handling
- Use proper loading states
- Implement proper optimistic updates
- Use proper transaction patterns

## Composables Integration
- Use stores with composables
- Implement proper store injection
- Use proper store access patterns
- Implement proper store testing
- Use proper store mocking

## Persistence
- Implement proper state persistence
- Use proper serialization
- Handle state rehydration
- Implement proper migration strategies
- Use proper storage strategies

## Testing
- Test stores in isolation
- Mock external dependencies
- Test state mutations
- Test async actions
- Test error scenarios

## Performance
- Use proper state subscriptions
- Implement proper memoization
- Avoid unnecessary re-renders
- Use proper store splitting
- Monitor store performance

## Best Practices
- Follow Vue 3 composition patterns
- Use proper TypeScript integration
- Implement proper error boundaries
- Use proper loading states
- Document store APIs

## Migration from Vuex
- Use proper migration strategies
- Implement proper store mapping
- Handle breaking changes
- Test migration thoroughly
- Document migration process
description: Comprehensive Pinia state management guidelines for Vue 3 and Nuxt 4 applications
globs: **/stores/**/*.ts, **/stores/**/*.js, **/*store*.ts, **/*store*.js
alwaysApply: true
---
