@page "/company-settings"
@using TossErp.Shared.DTOs
@inject HttpClient Http

<PageTitle>Company Settings</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-4">Company Settings</MudText>
    
    <MudCard>
        <MudCardContent>
            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.CompanyName" 
                                  Label="Company Name" Required="true" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.TaxNumber" 
                                  Label="Tax Number" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.Email" 
                                  Label="Email" Required="true" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.Phone" 
                                  Label="Phone" />
                </MudItem>
                <MudItem xs="12">
                    <MudTextField T="string" @bind-Value="companySettings.Address" 
                                  Label="Address" Lines="3" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.City" 
                                  Label="City" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.State" 
                                  Label="State/Province" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.ZipCode" 
                                  Label="ZIP/Postal Code" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.Country" 
                                  Label="Country" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.Website" 
                                  Label="Website" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudSelect T="CurrencyCode" @bind-Value="companySettings.Currency" 
                               Label="Currency" HelperText="Select the company currency">
                        <MudSelectItem Value="@CurrencyCode.USD">USD - US Dollar</MudSelectItem>
                        <MudSelectItem Value="@CurrencyCode.EUR">EUR - Euro</MudSelectItem>
                        <MudSelectItem Value="@CurrencyCode.GBP">GBP - British Pound</MudSelectItem>
                        <MudSelectItem Value="@CurrencyCode.JPY">JPY - Japanese Yen</MudSelectItem>
                        <MudSelectItem Value="@CurrencyCode.CAD">CAD - Canadian Dollar</MudSelectItem>
                    </MudSelect>
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.TimeZone" 
                                  Label="Time Zone" />
                </MudItem>
                <MudItem xs="12" sm="6">
                    <MudTextField T="string" @bind-Value="companySettings.Language" 
                                  Label="Language" />
                </MudItem>
            </MudGrid>
        </MudCardContent>
        <MudCardActions>
            <MudButton Color="Color.Primary" Variant="Variant.Filled" 
                       OnClick="SaveSettings">
                Save Settings
            </MudButton>
            <MudButton Variant="Variant.Outlined" OnClick="ResetSettings">
                Reset
            </MudButton>
        </MudCardActions>
    </MudCard>
</MudContainer>

@code {
    private CompanySettingsDto companySettings = new();

    protected override async Task OnInitializedAsync()
    {
        await LoadSettings();
    }

    private async Task LoadSettings()
    {
        // Mock data for now
        companySettings = new CompanySettingsDto
        {
            CompanyName = "TOSS ERP Solutions",
            TaxNumber = "TAX123456789",
            Email = "info@toss-erp.com",
            Phone = "+1-555-0123",
            Address = "123 Business Street",
            City = "New York",
            State = "NY",
            ZipCode = "10001",
            Country = "United States",
            Website = "https://toss-erp.com",
            Currency = CurrencyCode.USD,
            TimeZone = "America/New_York",
            Language = "English"
        };
    }

    private async Task SaveSettings()
    {
        // Mock save operation
        // In a real app, this would save to the database
        await Task.Delay(1000); // Simulate API call
    }

    private async Task ResetSettings()
    {
        await LoadSettings();
    }
} 