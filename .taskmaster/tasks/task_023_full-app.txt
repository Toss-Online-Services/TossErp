# Task ID: 23
# Title: Logistics/Delivery Service (MVP)
# Status: pending
# Dependencies: 1, 4, 5, 27, 28, 31
# Priority: medium
# Description: Shipments, carriers, tracking, delivery confirmations; integrates with Sales and Stock.
# Details:
Scope: Shipment, Package, Carrier, TrackingEvent, DeliveryProof. APIs to create/label/track; events to Stock for dispatch/receipt; webhook intake from carriers.

# Test Strategy:


# Subtasks:
## 1. Logistics: Database schema + migrations [pending]
### Dependencies: None
### Description: Shipment, Package, Carrier, TrackingEvent, DeliveryProof
### Details:
Acceptance:
- DDL with RLS; constraints; indexes
- Migrations scripted; ER diagram

## 2. Logistics: Carrier webhooks intake [pending]
### Dependencies: None
### Description: Webhook endpoints for carrier status updates with HMAC verification
### Details:
Acceptance:
- Endpoints for status updates; signature verification
- Retry, DLQ; idempotent processing
- Audit log entries; tests with sample payloads

## 3. Logistics: Domain + API endpoints [pending]
### Dependencies: None
### Description: Create shipment/labels, track, confirm delivery
### Details:
Acceptance:
- Endpoints CRUD + actions; ProblemDetails
- Integration with Sales dispatch + Stock
- Swagger examples + tests

## 4. Logistics: Web UI + tracking page [pending]
### Dependencies: None
### Description: Internal admin UI and public tracking page
### Details:
Acceptance:
- Admin: shipments list/detail; filters; export
- Public: tracking by code; events timeline
- Cypress tests

## 5. Logistics: Tests + docs [pending]
### Dependencies: None
### Description: Coverage and documentation
### Details:
Acceptance:
- Unit/integration tests â‰¥70%
- Webhook payload docs; troubleshooting
- Runbook for carrier outages

