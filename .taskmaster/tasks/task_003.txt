# Task ID: 3
# Title: Create Stock Application Layer
# Status: done
# Dependencies: 2
# Priority: high
# Description: Implement CQRS commands, queries, and handlers for stock operations
# Details:
Build application layer:
- Commands: CreateItem, UpdateItem, ReceiveStock, IssueStock, AdjustStock
- Queries: GetItems, GetStockLevels, GetMovementHistory
- DTOs and mappings
- Validators using FluentValidation
- Event handlers for external events (SaleCompleted, etc.)

# Test Strategy:


# Subtasks:
## 1. Create Commands [done]
### Dependencies: None
### Description: Implement CQRS commands for stock operations
### Details:
Create command classes:\n- CreateItemCommand\n- UpdateItemCommand\n- ReceiveStockCommand\n- IssueStockCommand\n- AdjustStockCommand\n- TransferStockCommand\n- Each command should include validation attributes and proper data structure

## 2. Create Queries [done]
### Dependencies: None
### Description: Implement CQRS queries for stock operations
### Details:
Create query classes:\n- GetItemsQuery (with filtering, search, pagination)\n- GetItemByIdQuery\n- GetStockLevelsQuery\n- GetMovementHistoryQuery\n- GetLowStockItemsQuery\n- Each query should include proper parameters and return appropriate DTOs

## 3. Create DTOs [done]
### Dependencies: None
### Description: Implement Data Transfer Objects for API responses
### Details:
Create DTO classes:\n- ItemDto (with all item properties)\n- StockLevelDto (current stock information)\n- MovementDto (movement history)\n- CreateItemRequest/Response\n- UpdateItemRequest\n- StockMovementRequest\n- PaginatedResult<T> for list responses

## 4. Implement Command Handlers [done]
### Dependencies: None
### Description: Create command handlers using MediatR
### Details:
Implement command handlers:\n- CreateItemCommandHandler\n- UpdateItemCommandHandler\n- ReceiveStockCommandHandler\n- IssueStockCommandHandler\n- AdjustStockCommandHandler\n- TransferStockCommandHandler\n- Each handler should use repositories, validate business rules, and publish domain events

## 5. Implement Query Handlers [done]
### Dependencies: None
### Description: Create query handlers using MediatR
### Details:
Implement query handlers:\n- GetItemsQueryHandler\n- GetItemByIdQueryHandler\n- GetStockLevelsQueryHandler\n- GetMovementHistoryQueryHandler\n- GetLowStockItemsQueryHandler\n- Each handler should use repositories and return appropriate DTOs

## 6. Create Validators [done]
### Dependencies: None
### Description: Implement FluentValidation validators
### Details:
Create validators:\n- CreateItemCommandValidator\n- UpdateItemCommandValidator\n- ReceiveStockCommandValidator\n- IssueStockCommandValidator\n- AdjustStockCommandValidator\n- TransferStockCommandValidator\n- Each validator should enforce business rules and data validation

